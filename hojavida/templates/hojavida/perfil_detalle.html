<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ perfil.apellidos }} {{ perfil.nombres }}</title>
  <style>
    :root{
      --bg:#050a08;
      --text:#e9fbf3;
      --muted:#7d8a85;
      --line:rgba(255,255,255,.08);
      --accent:#10b981;  /* Esmeralda */
      --accent2:#064e3b; /* Verde Bosque Profundo */
      --accent-pdf: #ef4444; /* Rojo para PDF */
      --shadow: 0 10px 30px rgba(0,0,0,.45);
      --radius:16px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% 10%, rgba(16,185,129,.15), transparent 60%),
        radial-gradient(900px 600px at 85% 20%, rgba(6,78,59,.20), transparent 60%),
        linear-gradient(180deg, var(--bg), #030706 70%);
      min-height:100vh;
    }

    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}

    .container{max-width:1100px; margin:0 auto; padding:28px 18px 48px;}
    
    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      gap:14px; margin-bottom:18px;
    }
    
    .topbar-actions {
      display: flex;
      gap: 10px;
    }

    .back{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 14px; border:1px solid var(--line); border-radius:999px;
      background:rgba(255,255,255,.04);
      font-size: 14px;
      transition: 0.3s;
      cursor: pointer;
    }
    .back:hover { background:rgba(255,255,255,.1); }

    .btn-download {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-top: 10px;
      padding: 6px 12px;
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid rgba(16, 185, 129, 0.3);
      border-radius: 8px;
      color: var(--accent);
      font-size: 12px;
      font-weight: 500;
      transition: 0.3s;
    }
    .btn-download:hover {
      background: var(--accent);
      color: white;
      text-decoration: none;
    }

    .btn-garage {
      background: rgba(16, 185, 129, 0.15) !important;
      border-color: rgba(16, 185, 129, 0.4) !important;
      color: var(--accent) !important;
      font-weight: 600;
      width: 100%;
      justify-content: center;
      margin-top: 15px;
    }
    .btn-garage:hover {
      background: var(--accent) !important;
      color: white !important;
    }

    .btn-pdf-main {
      background: rgba(239, 68, 68, 0.15) !important;
      border-color: rgba(239, 68, 68, 0.4) !important;
      color: #ff7e7e !important;
      font-weight: 600;
    }
    .btn-pdf-main:hover {
      background: rgba(239, 68, 68, 0.25) !important;
      border-color: var(--accent-pdf) !important;
    }

    .header{
      display:grid;
      grid-template-columns: 1.3fr .7fr;
      gap:14px;
      align-items:stretch;
      margin-bottom:14px;
    }

    .hero{
      padding:25px;
      border:1px solid var(--line);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
    }

    .hero-content {
      display: flex;
      gap: 25px;
      align-items: flex-start;
    }

    .foto-perfil img{
      width:150px; height:150px;
      border-radius: var(--radius);
      object-fit: cover;
      display: block;
      border: 2px solid var(--accent);
      box-shadow: 0 10px 25px rgba(0,0,0,0.5);
      background: #0d1411;
    }

    .info-principal { flex: 1; }
    .name{ margin:0; font-size:32px; line-height:1.1; letter-spacing: -1px; }
    .subtitle{ margin:8px 0 15px; color:var(--muted); font-size:15px; line-height: 1.4; }

    .personal-data {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid var(--line);
    }

    .data-item { font-size: 13px; }
    .data-item .k { color: var(--muted); display: block; margin-bottom: 2px; font-size: 11px; text-transform: uppercase; }
    .data-item .v { color: var(--text); font-weight: 500; }

    .aside{
      padding:18px;
      border:1px solid var(--line);
      border-radius: var(--radius);
      background:rgba(255,255,255,.03);
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
    }
    .aside h3{margin:0 0 15px; font-size:16px; color:var(--accent); border-bottom: 1px solid var(--line); padding-bottom: 8px;}
    
    .contact-kv { display: flex; flex-direction: column; gap: 12px; margin-bottom: auto; }
    .contact-kv .k { color: var(--muted); font-size: 12px; }
    .contact-kv .v { font-size: 14px; margin-bottom: 5px; }
    
    .grid-cards{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:14px;
      margin-top:14px;
    }

    .card{
      border:1px solid var(--line);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      box-shadow: var(--shadow);
      padding:16px;
    }
    .card h2{ margin:0 0 12px; font-size:18px; display:flex; justify-content:space-between; color: var(--accent); }
    .hint{color:var(--muted); font-size:13px}

    .timeline{ border-left:1px solid var(--line); padding-left:14px; }
    .item{ position:relative; padding:15px 0; border-bottom: 1px solid rgba(255,255,255,0.03); }
    .item:last-child { border-bottom: none; }
    .item:before{
      content:""; position:absolute; left:-21px; top:20px;
      width:12px; height:12px; border-radius:50%;
      background: var(--accent);
    }
    .title{font-weight:700; margin:0; font-size:15px;}
    .meta{margin:4px 0 0; font-size:13px; color:var(--muted);}

    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 12px;
      margin-top: 10px;
    }
    .product-item {
      background: rgba(255,255,255,.03);
      border: 1px solid var(--line);
      border-radius: 12px;
      overflow: hidden;
      transition: 0.3s;
    }
    .product-item:hover {
      border-color: var(--accent);
      transform: translateY(-3px);
    }
    .product-item a { display: block; text-decoration: none; color: inherit; }
    .product-item img { width: 100%; height: 100px; object-fit: cover; display: block; }
    .product-info { padding: 8px; font-size: 12px; }

    .empty{ padding:12px; border:1px dashed var(--line); border-radius:12px; color:var(--muted); font-size:14px; }

    @media (max-width:950px){
      .header{grid-template-columns:1fr;}
      .hero-content { flex-direction: column; align-items: center; text-align: center; }
      .personal-data { grid-template-columns: 1fr; }
      .grid-cards{grid-template-columns:1fr;}
    }
  </style>
</head>
<body>
<div class="container">

  <div class="topbar">
    <a class="back" href="{% url 'hojavida:home' %}">‚Üê Volver al inicio</a>
    <div class="topbar-actions">
        <a class="back btn-pdf-main" href="{% url 'hojavida:generar_pdf_cv' perfil.idperfil %}">
            üìÑ Descargar PDF
        </a>
    </div>
  </div>

  <div class="header">
    <div class="hero">
      <div class="hero-content">
        <div class="foto-perfil">
          {% if perfil.foto %}
            <img src="{{ perfil.foto.url }}" alt="Foto">
          {% else %}
            <img src="https://ui-avatars.com/api/?name={{ perfil.nombres }}+{{ perfil.apellidos }}&background=0d1411&color=10b981&size=150" alt="Sin foto">
          {% endif %}
        </div>
        
        <div class="info-principal">
          <h1 class="name">{{ perfil.apellidos }} {{ perfil.nombres }}</h1>
          <p class="subtitle">{{ perfil.descripcionperfil|default:"Profesional en desarrollo" }}</p>
          
          <div class="personal-data">
            <div class="data-item">
              <span class="k">Identificaci√≥n</span>
              <span class="v">{{ perfil.numerocedula }}</span>
            </div>
            <div class="data-item">
              <span class="k">G√©nero</span>
              <span class="v">{{ perfil.sexo_texto }}</span>
            </div>
            <div class="data-item">
              <span class="k">Nacionalidad</span>
              <span class="v">{{ perfil.nacionalidad|default:"No definida" }}</span>
            </div>
            <div class="data-item">
              <span class="k">Conducci√≥n</span>
              <span class="v">Licencia {{ perfil.licencia_texto }}</span>
            </div>
            <div class="data-item">
              <span class="k">Estado Civil</span>
              <span class="v">{{ perfil.estadocivil|default:"No definido" }}</span>
            </div>
            <div class="data-item">
              <span class="k">Nacimiento</span>
              <span class="v">{{ perfil.fechanacimiento|date:"d M, Y" }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="aside">
      <h3>Contacto Directo</h3>
      <div class="contact-kv">
        <div>
            <div class="k">Tel√©fono / Celular</div>
            <div class="v">{{ perfil.telefonoconvencional|default:perfil.telefonofijo|default:"No registrado" }}</div>
        </div>
        <div>
            <div class="k">Residencia</div>
            <div class="v">{{ perfil.direcciondomiciliaria|default:"No registrada" }}</div>
        </div>
        {% if perfil.sitioweb %}
        <div>
            <div class="k">Sitio Web</div>
            <div class="v"><a href="{{ perfil.sitioweb }}" target="_blank">Visitar Portafolio ‚Üó</a></div>
        </div>
        {% endif %}
      </div>
      
      <a href="{% url 'hojavida:lista_venta_garage' %}" class="back btn-garage">
          üõí Ir a Venta de Garage
      </a>
    </div>
  </div>

  <div class="grid-cards">
    <div class="card">
      <h2>Experiencia laboral <span class="hint">Trayectoria</span></h2>
      {% if experiencias %}
        <div class="timeline">
          {% for e in experiencias %}
            <div class="item">
              <p class="title">{{ e.cargodesempenado }}</p>
              <p class="meta"><strong>{{ e.nombrempresa }}</strong> | {{ e.fechainiciogestion }} ‚Üí {{ e.fechafingestion|default:"Actualidad" }}</p>
              <p class="desc" style="font-size:13px; margin-top:5px; color:var(--text); opacity:0.8;">{{ e.descripcionfunciones }}</p>
              {% if e.sas_url %}
                <a href="{{ e.sas_url }}" target="_blank" class="btn-download">
                  üìÇ Descargar informaci√≥n adjuntada
                </a>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="empty">Sin registros de experiencia.</div>
      {% endif %}
    </div>

    <div class="card">
      <h2>Cursos y Formaci√≥n <span class="hint">Educaci√≥n</span></h2>
      {% if cursos %}
        <div class="timeline">
          {% for c in cursos %}
            <div class="item">
              <p class="title">{{ c.nombrecurso }}</p>
              <p class="meta">{{ c.totalhoras }} horas acumuladas | Finalizado: {{ c.fechafin }}</p>
              {% if c.sas_url %}
                <a href="{{ c.sas_url }}" target="_blank" class="btn-download">
                  üìú Ver certificado adjunto
                </a>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="empty">No hay cursos registrados.</div>
      {% endif %}
    </div>

    <div class="card">
      <h2>Reconocimientos <span class="hint">Logros</span></h2>
      {% if reconocimientos %}
        <div class="timeline">
          {% for r in reconocimientos %}
            <div class="item">
              <p class="title">{{ r.tiporeconocimiento }}</p>
              <p class="meta"><i>{{ r.institucioncertificado }}</i> ({{ r.fechareconocimiento }})</p>
              {% if r.sas_url %}
                <a href="{{ r.sas_url }}" target="_blank" class="btn-download">
                  üèÜ Descargar informaci√≥n adjuntada
                </a>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="empty">Sin reconocimientos registrados.</div>
      {% endif %}
    </div>

    <div class="card">
        <h2>Mi Portafolio <span class="hint">Proyectos</span></h2>
        {% if productos_laborales or productos_academicos %}
            <div class="product-grid">
                {% for p in productos_laborales %}
                    <div class="product-item">
                        {% if p.sas_url %}
                          <a href="{{ p.sas_url }}" target="_blank" title="Ver en grande">
                            <img src="{{ p.sas_url }}">
                            <div class="product-info"><strong>{{ p.nombreproducto }}</strong><br><span class="meta" style="color:var(--accent)">Laboral</span></div>
                          </a>
                        {% else %}
                          <div class="product-info"><strong>{{ p.nombreproducto }}</strong><br><span class="meta" style="color:var(--accent)">Laboral</span></div>
                        {% endif %}
                    </div>
                {% endfor %}
                {% for a in productos_academicos %}
                    <div class="product-item">
                        {% if a.sas_url %}
                          <a href="{{ a.sas_url }}" target="_blank" title="Ver en grande">
                            <img src="{{ a.sas_url }}">
                            <div class="product-info"><strong>{{ a.nombreproducto }}</strong><br><span class="meta" style="color:var(--muted)">Acad√©mico</span></div>
                          </a>
                        {% else %}
                          <div class="product-info"><strong>{{ a.nombreproducto }}</strong><br><span class="meta" style="color:var(--muted)">Acad√©mico</span></div>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty">No hay proyectos para mostrar.</div>
        {% endif %}
    </div>

  </div>
</div>
</body>
</html>